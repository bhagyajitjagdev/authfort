---
title: Configuration
description: All AuthFort constructor options explained.
sidebar:
  order: 1
---

import CodeBlock from '../../../components/CodeBlock.astro';

export const configExample = `from authfort import AuthFort, CookieConfig, GoogleProvider, RateLimitConfig

auth = AuthFort(
    database_url="postgresql+asyncpg://user:pass@localhost/mydb",
    access_token_ttl=900,
    refresh_token_ttl=2592000,
    jwt_issuer="authfort",
    cookie=CookieConfig(),
    providers=[GoogleProvider(client_id="...", client_secret="...")],
    key_rotation_ttl=172800,
    introspect_secret="shared-secret-with-services",
    allow_signup=True,
    password_reset_ttl=3600,
    rsa_key_size=2048,
    frontend_url="https://app.example.com",
    email_verify_ttl=86400,
    magic_link_ttl=600,
    email_otp_ttl=300,
    allow_passwordless_signup=False,
    rate_limit=RateLimitConfig(),
)`;

export const providersExample = `from authfort import GoogleProvider, GitHubProvider, GenericOIDCProvider

providers=[
    GoogleProvider(client_id="...", client_secret="..."),
    GitHubProvider(client_id="...", client_secret="..."),
    GenericOIDCProvider("keycloak", client_id="...", client_secret="...",
        discovery_url="https://keycloak.example.com/.well-known/openid-configuration"),
]`;

The `AuthFort` constructor accepts the following parameters. Only `database_url` is required — everything else has sensible defaults.

<CodeBlock title="Example" code={configExample} />

## Parameters

### `database_url` (required)

SQLAlchemy-compatible async database URL.

| Database | URL Format |
|----------|-----------|
| PostgreSQL | `postgresql+asyncpg://user:pass@host/dbname` |
| SQLite | `sqlite+aiosqlite:///path/to/db.sqlite` |
| MySQL | `mysql+aiomysql://user:pass@host/dbname` |

### `access_token_ttl`

Access token lifetime in seconds. Default: `900` (15 minutes).

Short-lived tokens limit the window of exposure if a token is leaked. The client SDK handles automatic refresh before expiry.

### `refresh_token_ttl`

Refresh token lifetime in seconds. Default: `2592000` (30 days).

This is effectively the "remember me" duration. Each time the token is refreshed, the expiry resets — so the user only has to log in again after 30 days of **inactivity**.

### `jwt_issuer`

The `iss` claim in issued JWTs. Default: `"authfort"`.

Microservices using `authfort-service` must configure the same issuer value.

### `cookie`

Cookie configuration. Default: `None` (bearer-only mode).

Pass `CookieConfig()` to enable cookie-based token delivery. See [Cookies & Bearer](/authfort/server/cookies-and-bearer/) for all cookie options.

### `providers`

List of OAuth providers. Default: `None`.

<CodeBlock code={providersExample} />

See [OAuth Providers](/authfort/server/oauth/) for setup details.

### `key_rotation_ttl`

How long a retired signing key stays valid after rotation, in seconds. Default: `172800` (48 hours).

When you call `rotate_key()`, the old key's expiry is set to `now + key_rotation_ttl`. It stays in JWKS until then, so tokens signed with the old key remain valid during the transition.

### `introspect_secret`

Shared secret for the token introspection endpoint. Default: `None` (introspection disabled).

Set this to a strong random string. Microservices using `authfort-service` must know this secret to call the introspection endpoint.

### `allow_signup`

Whether to allow public user registration via the `/auth/signup` endpoint. Default: `True`.

Set to `False` to disable public signup. You can still create users programmatically via `auth.create_user()`.

### `password_reset_ttl`

Password reset token lifetime in seconds. Default: `3600` (1 hour).

After this time, the reset token expires and the user must request a new one.

### `rsa_key_size`

RSA key size in bits. Default: `2048`. Must be `>= 2048`.

Controls the size of RSA keys generated for JWT signing. Larger keys are more secure but slower. 2048-bit keys are considered safe for most use cases. Use `4096` for higher security requirements.

### `frontend_url`

Frontend origin URL for cross-origin OAuth redirects. Default: `None`.

When your frontend and API are on different domains (e.g., `app.example.com` and `api.example.com`), set this to your frontend origin. AuthFort will prepend it to `redirect_to` paths so OAuth redirects land on the correct domain.

```python
auth = AuthFort(
    database_url="...",
    frontend_url="https://app.example.com",
    # ...
)
```

Without `frontend_url`, a `redirect_to=/dashboard` will redirect to `api.example.com/dashboard` (the API server). With `frontend_url="https://app.example.com"`, it redirects to `https://app.example.com/dashboard`.

If your frontend and API share the same origin, you don't need this.

### `email_verify_ttl`

Email verification token lifetime in seconds. Default: `86400` (24 hours).

### `magic_link_ttl`

Magic link token lifetime in seconds. Default: `600` (10 minutes).

Short-lived for security — magic links are sensitive since they grant full login access.

### `email_otp_ttl`

Email OTP code lifetime in seconds. Default: `300` (5 minutes).

Short-lived since OTP codes are easier to guess (6 digits = 1,000,000 combinations).

### `allow_passwordless_signup`

Whether magic links and email OTP auto-create users for unknown emails. Default: `False`.

When `True`, requesting a magic link or OTP for a non-existent email creates a new user with no password. The user can only log in via passwordless methods until they set a password via the password reset flow.

This is independent of `allow_signup` — you can disable password-based signup but allow passwordless signup.

### `rate_limit`

Rate limiting configuration. Default: `None` (disabled).

Pass a `RateLimitConfig` to enable per-endpoint rate limiting on all auth endpoints. Uses an in-memory sliding window counter by default.

```python
from authfort import RateLimitConfig

auth = AuthFort(
    database_url="...",
    rate_limit=RateLimitConfig(),  # all defaults
)

# Or customize per endpoint
auth = AuthFort(
    database_url="...",
    rate_limit=RateLimitConfig(
        login="10/min",
        signup="5/min",
        refresh=None,  # disable for refresh
    ),
)
```

| Endpoint | Default |
|----------|---------|
| `login` | `5/min` |
| `signup` | `3/min` |
| `magic_link` | `5/min` |
| `otp` | `5/min` |
| `verify_email` | `5/min` |
| `refresh` | `30/min` |
| `oauth_authorize` | `10/min` |

Format: `"{count}/{period}"` where period is `sec`, `min`, `hour`, or `day`. Set to `None` to disable for that endpoint.

See [Rate Limiting](/authfort/server/rate-limiting/) for details on IP/email-based limiting, events, and custom storage backends.
