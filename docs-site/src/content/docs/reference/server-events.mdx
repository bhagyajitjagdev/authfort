---
title: Server Events
description: All event types and their payloads.
sidebar:
  order: 4
---

Register hooks with `@auth.on("event_name")` or `auth.add_hook("event_name", callback)`.

---

## user_created

Fired when a new user is created (via signup, OAuth, or `create_user()`).

| Field | Type |
|-------|------|
| `user_id` | `UUID` |
| `email` | `str` |
| `name` | `str \| None` |
| `provider` | `str` — `"email"`, `"google"`, or `"github"` |
| `timestamp` | `datetime` |

## login

Fired on successful authentication.

| Field | Type |
|-------|------|
| `user_id` | `UUID` |
| `email` | `str` |
| `provider` | `str` |
| `ip_address` | `str \| None` |
| `user_agent` | `str \| None` |
| `timestamp` | `datetime` |

## login_failed

Fired when login fails.

| Field | Type |
|-------|------|
| `email` | `str` |
| `reason` | `str` — e.g., `"invalid_credentials"`, `"user_banned"` |
| `ip_address` | `str \| None` |
| `user_agent` | `str \| None` |
| `timestamp` | `datetime` |

## logout

Fired when a user logs out.

| Field | Type |
|-------|------|
| `user_id` | `UUID \| None` |
| `timestamp` | `datetime` |

## token_refreshed

Fired when a refresh token is used to get new tokens.

| Field | Type |
|-------|------|
| `user_id` | `UUID` |
| `ip_address` | `str \| None` |
| `user_agent` | `str \| None` |
| `timestamp` | `datetime` |

## oauth_link

Fired when an OAuth account is linked to an existing user (email match).

| Field | Type |
|-------|------|
| `user_id` | `UUID` |
| `email` | `str` |
| `provider` | `str` |
| `timestamp` | `datetime` |

## role_added

Fired when a role is assigned.

| Field | Type |
|-------|------|
| `user_id` | `UUID` |
| `role` | `str` |
| `timestamp` | `datetime` |

## role_removed

Fired when a role is removed.

| Field | Type |
|-------|------|
| `user_id` | `UUID` |
| `role` | `str` |
| `timestamp` | `datetime` |

## user_updated

Fired when a user's profile fields are updated via `update_user()`.

| Field | Type |
|-------|------|
| `user_id` | `UUID` |
| `fields` | `list[str]` — names of updated fields (e.g., `["name", "phone"]`) |
| `timestamp` | `datetime` |

## user_banned

Fired when a user is banned.

| Field | Type |
|-------|------|
| `user_id` | `UUID` |
| `timestamp` | `datetime` |

## user_unbanned

Fired when a user is unbanned.

| Field | Type |
|-------|------|
| `user_id` | `UUID` |
| `timestamp` | `datetime` |

## session_revoked

Fired when sessions are revoked.

| Field | Type |
|-------|------|
| `user_id` | `UUID` |
| `session_id` | `UUID \| None` — `None` if `revoke_all` |
| `revoke_all` | `bool` |
| `timestamp` | `datetime` |

## key_rotated

Fired when a new signing key is created.

| Field | Type |
|-------|------|
| `old_kid` | `str` |
| `new_kid` | `str` |
| `timestamp` | `datetime` |

## password_reset_requested

Fired when `create_password_reset_token()` is called for a valid user.

| Field | Type |
|-------|------|
| `user_id` | `UUID` |
| `email` | `str` |
| `timestamp` | `datetime` |

## password_reset

Fired when a password is successfully reset via token.

| Field | Type |
|-------|------|
| `user_id` | `UUID` |
| `timestamp` | `datetime` |

## password_changed

Fired when a password is changed via `change_password()`.

| Field | Type |
|-------|------|
| `user_id` | `UUID` |
| `timestamp` | `datetime` |
